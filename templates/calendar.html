{% extends "base.html" %}

{% block title %}L·ªãch ƒê·∫∑t Ph√≤ng{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">üìÖ L·ªãch ƒê·∫∑t Ph√≤ng</h1>

    <!-- ƒêi·ªÅu h∆∞·ªõng th√°ng -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <a href="{{ url_for('calendar_view', year=prev_month.year, month=prev_month.month) }}" class="btn btn-outline-primary">&larr; Th√°ng {{ prev_month.month }}</a>
        <h2 class="mb-0">Th√°ng {{ current_month.month }}/{{ current_month.year }}</h2>
        <a href="{{ url_for('calendar_view', year=next_month.year, month=next_month.month) }}" class="btn btn-outline-primary">Th√°ng {{ next_month.month }} &rarr;</a>
    </div>

    <!-- L·ªãch -->
    <div class="table-responsive">
        <table class="table table-bordered calendar-table">
            <thead>
                <tr class="text-center">
                    <th>CN</th><th>T2</th><th>T3</th><th>T4</th><th>T5</th><th>T6</th><th>T7</th>
                </tr>
            </thead>
            <tbody>
                {% for week in calendar_data %}
                <tr>
                    {% for date, date_str, info in week %}
                        <!-- S·ª¨A L·ªñI QUAN TR·ªåNG: Th√™m class m√†u ƒë·ªông -->
                        <td class="day-cell {{ info.status_color if info else '' }}">
                            {% if date %}
                                <a href="{{ url_for('calendar_details', date_str=date_str) }}" class="day-link">
                                    <div class="date-number {% if date == today %}today{% endif %}">{{ date.day }}</div>
                                    <div class="booking-info">
                                        {% if info %}
                                            <span class="badge {{ info.status_color }}">{{ info.status_text }}</span>
                                        {% endif %}
                                    </div>
                                </a>
                            {% endif %}
                        </td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- CSS cho m√†u s·∫Øc v√† giao di·ªán -->
<style>
    .calendar-table td {
        height: 110px;
        vertical-align: top;
        padding: 0;
    }
    .day-cell {
        transition: background-color 0.2s ease-in-out;
    }
    .day-link {
        display: block;
        width: 100%;
        height: 100%;
        text-decoration: none;
        color: inherit;
        padding: 5px;
    }
    .day-link:hover {
        background-color: #e9ecef;
    }
    .date-number {
        font-weight: bold;
        text-align: right;
    }
    .date-number.today {
        background-color: #0d6efd;
        color: white;
        border-radius: 50%;
        width: 28px;
        height: 28px;
        line-height: 28px;
        text-align: center;
        float: right;
    }
    .booking-info {
        margin-top: 30px;
        text-align: center;
    }
    .badge.full { background-color: #dc3545; } /* M√†u ƒë·ªè cho H·∫øt ph√≤ng */
    .badge.occupied { background-color: #0d6efd; } /* M√†u xanh cho C√≥ kh√°ch */
    .badge.empty { background-color: #ffc107; color: #000 !important; } /* M√†u v√†ng cho Tr·ªëng */
</style>
{% endblock %} 