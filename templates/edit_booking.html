{% extends "base.html" %}

{% block title %}Chỉnh sửa Đặt phòng{% endblock %}

{% block content %}
    <h1 class="mb-4">✏️ Chỉnh sửa Đặt phòng #{{ booking.get('Số đặt phòng', 'N/A') }}</h1>

    <div class="card">
        <div class="card-body">
            <form method="POST">
                <!-- Hàng 1: Tên khách và Loại phòng -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="guest_name" class="form-label">Tên người đặt</label>
                        <input type="text" class="form-control" id="guest_name" name="Tên người đặt" value="{{ booking.get('Tên người đặt', '') }}" required>
                    </div>
                    <div class="col-md-6">
                        <label for="room_type" class="form-label">Tên chỗ nghỉ</label>
                        <input type="text" class="form-control" id="room_type" name="Tên chỗ nghỉ" value="{{ booking.get('Tên chỗ nghỉ', '') }}">
                    </div>
                </div>

                <!-- Hàng 2: Ngày Check-in và Check-out -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="check_in_date" class="form-label">Ngày đến</label>
                        {# Chuyển đổi ngày tháng sang định dạng YYYY-MM-DD cho input type="date" #}
                        <input type="date" class="form-control" id="check_in_date" name="Ngày đến" value="{{ booking.get('Check-in Date', '') | string | slice(0, 10) }}">
                    </div>
                    <div class="col-md-6">
                        <label for="check_out_date" class="form-label">Ngày đi</label>
                        <input type="date" class="form-control" id="check_out_date" name="Ngày đi" value="{{ booking.get('Check-out Date', '') | string | slice(0, 10) }}">
                    </div>
                </div>

                <!-- Hàng 3: Tình trạng và Tổng thanh toán -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="status" class="form-label">Tình trạng</label>
                        <select class="form-select" id="status" name="Tình trạng">
                            <option value="OK" {% if booking.get('Tình trạng') == 'OK' %}selected{% endif %}>OK</option>
                            <option value="Đã hủy" {% if booking.get('Tình trạng') == 'Đã hủy' %}selected{% endif %}>Đã hủy</option>
                            <option value="Chờ xử lý" {% if booking.get('Tình trạng') == 'Chờ xử lý' %}selected{% endif %}>Chờ xử lý</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="total_payment" class="form-label">Tổng thanh toán</label>
                        <input type="number" class="form-control" id="total_payment" name="Tổng thanh toán" value="{{ booking.get('Tổng thanh toán', 0) }}">
                    </div>
                </div>

                <!-- Các trường chỉ đọc (Read-only) -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="booking_id" class="form-label">Số đặt phòng (Không thể sửa)</label>
                        <input type="text" class="form-control" id="booking_id" value="{{ booking.get('Số đặt phòng', '') }}" readonly>
                    </div>
                </div>
                
                <hr>

                <a href="{{ url_for('view_bookings') }}" class="btn btn-secondary">Hủy</a>
                <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
            </form>
        </div>
    </div>
{% endblock %} 